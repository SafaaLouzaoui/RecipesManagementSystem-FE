<head>
  <link
    href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"
    rel="stylesheet"
  />
</head>
<body>
  <!-- for header part -->
  <header>
    <div class="logosec">
      <div class="container">
        <h1>
          <a href="#" routerLink="/home" class="logo">Foodie.</a>
        </h1>
      </div>
      <div id="menu" class="icn menuicn" id="menuicn" alt="menu-icon">
        <input type="checkbox" id="menu-toggle" />
        <ul></ul>
      </div>
      <!-- <img src=
"https://media.geeksforgeeks.org/wp-content/uploads/20221210182541/Untitled-design-(30).png"
          class="icn menuicn"
          id="menuicn"
          alt="menu-icon"> -->
    </div>

    <!-- <div class="searchbar">
      <input type="text"
             placeholder="Search">
      <div class="searchbtn">
        <img src=
"https://media.geeksforgeeks.org/wp-content/uploads/20221210180758/Untitled-design-(28).png"
              class="icn srchicn"
              alt="search-icon">
        </div>
  </div> -->

    <div class="message">
      <div class="notification-container" [ngClass]="{ open: isOpen }">
        <div mat-icon-button (click)="toggleDropdown()">
          <div class="circle"></div>
          <img src="assets/images/bell.png" class="icn" alt="" />
        </div>
        <div class="notification-list">
          <div *ngFor="let comment of mesComments" class="notification-item">
<p>
              <span style="color: black;">"{{comment.proprietaire?.nomComplet}}" commented :  {{comment.message}}</span>
            </p>
          </div>
        </div>
      </div>

      <div class="dp">
        <img
          src="'../../assets/images/{{ personne.image }}"
          class="dpicn"
          alt="dp"
        />
      </div>
    </div>
  </header>

  <div class="main-container">
    <div class="navcontainer">
      <nav class="nav">
        <div class="nav-upper-options">
          <!-- <div class="nav-option option1">
						<img src=
"https://media.geeksforgeeks.org/wp-content/uploads/20221210182148/Untitled-design-(29).png"
							class="nav-img"
							alt="dashboard">
						<h3> Dashboard</h3>
					</div> -->
          <div
            class="nav-option"
            (click)="fetchRecettesByUser()"
            (click)="toggleRecipe()"
            (click)="selectOption(1)"
            [ngStyle]="{
              'border-left':
                selectedOption === 1 ? '5px solid var(--dark-orange)' : 'none',
              'background-color':
                selectedOption === 1 ? 'var(--Border-color)' : 'transparent',
              color: selectedOption === 1 ? 'rgb(0, 0, 0)' : 'inherit'
            }"
          >
            <img
              src="https://media.geeksforgeeks.org/wp-content/uploads/20221210183322/9.png"
              class="nav-img"
              alt="articles"
            />
            <h5>My Recipes</h5>
          </div>

          <div
            class="nav-option option3"
            (click)="toggleAddRecipe()"
            (click)="selectOption(3)"
            [ngStyle]="{
              'border-left':
                selectedOption === 3 ? '5px solid var(--dark-orange)' : 'none',
              'background-color':
                selectedOption === 3 ? 'var(--Border-color)' : 'transparent',
              color: selectedOption === 3 ? 'rgb(0, 0, 0)' : 'inherit'
            }"
          >
            <img
              src="https://media.geeksforgeeks.org/wp-content/uploads/20221210183320/5.png"
              class="nav-img"
              alt="report"
            />
            <h5>Create recipes</h5>
          </div>
          <div *ngIf="personne.role === 'ADMIN'">
            <div
              class="nav-option option4"
              (click)="toggleShowUsers()"
              (click)="selectOption(4)"
              [ngStyle]="{
                'border-left':
                  selectedOption === 4
                    ? '5px solid var(--dark-orange)'
                    : 'none',
                'background-color':
                  selectedOption === 4 ? 'var(--Border-color)' : 'transparent',
                color: selectedOption === 4 ? 'rgb(0, 0, 0)' : 'inherit'
              }"
            >
              <img
                src="../../assets/images/group.png"
                class="nav-img"
                alt="institution"
              />
              <h5>Users</h5>
            </div>
          </div>
          <!-- <div
            class="nav-option option5"
            (click)="toggleShowInfoUsers()"
            (click)="selectOption(5)"
            [ngStyle]="{
              'border-left':
                selectedOption === 5 ? '5px solid var(--dark-orange)' : 'none',
              'background-color':
                selectedOption === 5 ? 'var(--Border-color)' : 'transparent',
              color: selectedOption === 5 ? 'rgb(0, 0, 0)' : 'inherit'
            }"
          >
            <img
              src="https://media.geeksforgeeks.org/wp-content/uploads/20221210183323/10.png"
              class="nav-img"
              alt="blog"
            />
            <h5>Profile</h5>
          </div> -->

          <div *ngIf="personne.role === 'ADMIN'">
            <div
              class="nav-option option8"
              (click)="toggleshowCategories()"
              (click)="selectOption(8)"
              [ngStyle]="{
                'border-left':
                  selectedOption === 8
                    ? '5px solid var(--dark-orange)'
                    : 'none',
                'background-color':
                  selectedOption === 8 ? 'var(--Border-color)' : 'transparent',
                color: selectedOption === 7 ? 'rgb(0, 0, 0)' : 'inherit'
              }"
            >
              <img
                src="../../assets/images/category.png"
                class="nav-img"
                alt="logout"
              />
              <h5>Categories</h5>
            </div>
          </div>
          <div *ngIf="personne.role === 'ADMIN'">
            <div
              class="nav-option option9"
              (click)="toggleshowIngredients()"
              (click)="selectOption(9)"
              [ngStyle]="{
                'border-left':
                  selectedOption === 9
                    ? '5px solid var(--dark-orange)'
                    : 'none',
                'background-color':
                  selectedOption === 9 ? 'var(--Border-color)' : 'transparent',
                color: selectedOption === 7 ? 'rgb(0, 0, 0)' : 'inherit'
              }"
            >
              <img
                src="../../assets/images/harvest.png"
                class="nav-img"
                alt="logout"
              />
              <h5>Ingredients</h5>
            </div>
          </div>
          <div
            class="nav-option option6"
            (click)="toggleProfile()"
            (click)="selectOption(6)"
            [ngStyle]="{
              'border-left':
                selectedOption === 6 ? '5px solid var(--dark-orange)' : 'none',
              'background-color':
                selectedOption === 6 ? 'var(--Border-color)' : 'transparent',
              color: selectedOption === 6 ? 'rgb(0, 0, 0)' : 'inherit'
            }"
          >
            <img
              src="https://media.geeksforgeeks.org/wp-content/uploads/20221210183320/4.png"
              class="nav-img"
              alt="settings"
            />
            <h5>Settings</h5>
          </div>
          <div
            class="nav-option option7"
            (click)="selectOption(7)"
            (click)="logout()"
            [ngStyle]="{
              'border-left':
                selectedOption === 7 ? '5px solid var(--dark-orange)' : 'none',
              'background-color':
                selectedOption === 7 ? 'var(--Border-color)' : 'transparent',
              color: selectedOption === 7 ? 'rgb(0, 0, 0)' : 'inherit'
            }"
          >
            <img
              src="https://media.geeksforgeeks.org/wp-content/uploads/20221210183321/7.png"
              class="nav-img"
              alt="logout"
            />
            <h5>Logout</h5>
          </div>
        </div>
      </nav>
    </div>
    <div class="main">
      <div class="report-container">
        <!-- <div class="report-header">
					<h1 class="recent-Articles">Recent Articles</h1>
					<button class="view">View All</button>
				</div> -->
        <div *ngIf="showProfile; else recipeOrAdd">
          <app-user-profile></app-user-profile>
        </div>
        <ng-template #recipeOrAdd>
          <div *ngIf="showRecipe; else addRecipeSection">
            <section class="section food-menu" id="food-menu">
              <div class="container">
                <h2 class="h2 section-title">
                  My <span class="span">Recipes</span>
                </h2>
                <ul class="food-menu-list">
                  <li *ngFor="let recette of recettes">
                    <div class="food-menu-card">
                      <div class="card-banner">
                        <ng-container
                          *ngIf="recette.medias && recette.medias.length > 0"
                        >
                          <img
                            src="{{ recette.medias[0].url }}"
                            width="300"
                            height="300"
                            loading="lazy"
                            alt="Fried Chicken Unlimited"
                            class="w-100"
                          />
                        </ng-container>

                        <!-- <div class="badge">-15%</div> -->

                        <button
                          class="btn food-menu-btn"
                          (click)="viewRecette(recette.id)"
                        >
                          View details
                        </button>
                      </div>

                      <div class="wrapper">
                        <p class="category">
                          {{ recette.utilisateurCreateur?.user_name }}
                        </p>

                        <div class="rating-wrapper">
                          <button
                            class="button-10"
                            *ngIf="recette.id !== undefined"
                            (click)="deleteMesRecette(recette.id)"
                          >
                            Delete
                          </button>
                          <button
                            class="button-10"
                            *ngIf="recette.id !== undefined"
                            (click)="updateRecette(recette.id)"
                          >
                            Update
                          </button>
                        </div>
                      </div>

                      <h3 class="h3 card-title">{{ recette.nom }}</h3>

                      <div class="price-wrapper">
                        <p class="price-text">Durée Préparation:</p>

                        <data class="price">{{
                          recette.dureePreparation
                        }}</data>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
            </section>
          </div>
          <ng-template #addRecipeSection>
            <div *ngIf="showAddRecipe; else ShowUsers">
              <app-add-recette></app-add-recette>
            </div>
            <ng-template #ShowUsers>
              <div *ngIf="ShowAllUsers; else ShowInfo">
              <!-- //Bootstrap CDN -->
              <link
                href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
                rel="stylesheet"
                integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
                crossorigin="anonymous"
              />

              <!-- //Custom Styling -->
              <title>Document</title>
              <div class="main">
                <div class="container" style="font-size: 110%">
                  <div class="main-sub row align-items-center pt-5"></div>
                  <div class="table-container mt-5">
                    <div class="mb-2">
                      <h2 class="">USERS</h2>
                      <!-- <small class="text-secondary"
              >View all form tasks assigned to your group.</small
            > -->
                    </div>
                    <table
                      id="mytable"
                      class="table align-middle mb-0 bg-white"
                    >
                      <thead class="bg-light">
                        <tr class="header-row">
                          <th>ID #</th>
                          <th>Name</th>
                          <th>email</th>
                          <th>date de creation</th>
                          <th>status</th>
                          <th>Role</th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let user of allUsers">
                          <td>
                            <div class="d-flex align-items-center">
                              <div class="">
                                <p class="fw-bold mb-1">{{ user.id }}</p>
                              </div>
                            </div>
                          </td>
                          <td>
                            <p class="fw-bold fw-normal mb-1">
                              {{ user.nomComplet }}
                            </p>
                          </td>

                          <td>
                            <!-- <span
                    ><a
                      class="btn avatar-button rounded-circle overflow-hidden p-0 m-0 d-inline-flex"
                      ><span
                        data-v-0a07f886=""
                        class="avatar-span border-0 d-inline-flex align-items-center justify-content-center text-white text-uppercase text-nowrap font-weight-normal"
                      ></span
                    ></a>
                    </span> -->
                            {{ user.adresseMail }}
                          </td>
                          <td>{{ user.dateCreation }}</td>
                          <td>
                            {{ user.statut }}
                          </td>
                          <td>
                            <p style="margin-right: 30%">{{ user.role }}</p>
                          </td>
                          <td>
                            <button
                              class="button-10"
                              *ngIf="user.id !== undefined"
                              (click)="deletePersonne(user.id)"
                            >
                              Delete
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
</div>
              <ng-template #ShowInfo>
                <div *ngIf="ShowInfoUser; else Showcat">
                  <app-user-info></app-user-info>
                </div>
                <ng-template #Showcat>
                  <div *ngIf="showCategories; else ShowIngre">
                    <app-list-categorie></app-list-categorie>
                  </div>
                  <ng-template #ShowIngre>
                    <div *ngIf="showIngredients">
                      <app-list-ingredient></app-list-ingredient>
                    </div>
                  </ng-template>
                </ng-template>
              </ng-template>
            </ng-template>
          </ng-template>
        </ng-template>
      </div>
    </div>
  </div>

  <!-- <script src="./index.js"></script> -->
</body>
